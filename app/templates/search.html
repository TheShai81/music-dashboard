{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Search Users, Tracks, and Artists</h2>

<form method="POST" class="row g-3 mb-4">
    <div class="col-md-4">
        <label class="form-label">User keyword</label>
        <input type="text" name="user_keyword" class="form-control" placeholder="username">
    </div>

    <div class="col-md-4">
        <label class="form-label">Track keyword</label>
        <input type="text" name="track_keyword" class="form-control" placeholder="track title">
    </div>

    <div class="col-md-4">
        <label class="form-label">Artist keyword</label>
        <input type="text" name="artist_keyword" class="form-control" placeholder="artist name">
    </div>

    <div class="col-12">
        <button type="submit" class="btn btn-success">Search</button>
    </div>
</form>

<div class="row">
    <div class="col-md-4">
        <h4>Users</h4>
        {% if users %}
            <ul class="list-group">
                {% for u in users %}
                <li class="list-group-item bg-dark text-light d-flex justify-content-between align-items-center">
                    <a class="text-light" href="{{ url_for('main.user_page', user_id=u.user_id) }}">{{ u.username }}</a>
                    {% if u.friend %}
                        <span class="badge bg-success">Friend</span>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">No users found.</p>
        {% endif %}
    </div>

    <div class="col-md-4">
        <h4>Tracks</h4>
        {% if tracks %}
            <ul class="list-group">
                {% for t in tracks %}
                <li class="list-group-item bg-dark text-light">
                    <a class="text-light" href="{{ url_for('main.track_page', track_id=t.track_id) }}">
                        {{ t.title }}
                    </a>
                    <div class="small text-muted">
                        {{ t.artist_name }} â€¢ {{ t.duration }} sec
                    </div>
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">No tracks found.</p>
        {% endif %}
    </div>

    <div class="col-md-4">
        <h4>Artists</h4>
        {% if artists %}
            <ul class="list-group">
                {% for a in artists %}
                <li class="list-group-item bg-dark text-light">
                    <a class="text-light" href="{{ url_for('main.artist_page', artist_id=a.artist_id) }}">
                        {{ a.name }}
                    </a>
                    <div class="small text-muted">Popularity: {{ a.popularity }}</div>
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">No artists found.</p>
        {% endif %}
    </div>
</div>

{% endblock %}